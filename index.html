<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Voice Assistant</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 30px;
            max-width: 500px;
            width: 100%;
        }

        h1 {
            text-align: center;
            color: #667eea;
            margin-bottom: 10px;
            font-size: 28px;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
        }

        .mic-button {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            color: white;
            font-size: 50px;
            cursor: pointer;
            display: block;
            margin: 0 auto 20px;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }

        .mic-button:hover {
            transform: scale(1.05);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.6);
        }

        .mic-button:active {
            transform: scale(0.95);
        }

        .mic-button.listening {
            animation: pulse 1.5s infinite;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .status {
            text-align: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            margin-bottom: 20px;
            font-weight: 500;
            color: #333;
        }

        .status.listening {
            background: #fff3cd;
            color: #856404;
        }

        .status.speaking {
            background: #d1ecf1;
            color: #0c5460;
        }

        .transcript {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            min-height: 80px;
            max-height: 200px;
            overflow-y: auto;
        }

        .transcript p {
            margin: 10px 0;
            line-height: 1.6;
        }

        .user-text {
            color: #667eea;
            font-weight: 600;
        }

        .assistant-text {
            color: #764ba2;
            font-weight: 600;
        }

        .controls {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-clear {
            background: #f8f9fa;
            color: #333;
        }

        .btn-clear:hover {
            background: #e2e6ea;
        }

        .features {
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            font-size: 12px;
            color: #666;
        }

        .features h3 {
            font-size: 14px;
            color: #667eea;
            margin-bottom: 10px;
        }

        .features ul {
            list-style: none;
            padding-left: 0;
        }

        .features li {
            padding: 5px 0;
            padding-left: 20px;
            position: relative;
        }

        .features li:before {
            content: "âœ“";
            position: absolute;
            left: 0;
            color: #667eea;
            font-weight: bold;
        }

        .error {
            background: #f8d7da;
            color: #721c24;
            padding: 10px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-size: 14px;
            display: none;
        }

        @media (max-width: 480px) {
            .container {
                padding: 20px;
            }

            h1 {
                font-size: 24px;
            }

            .mic-button {
                width: 100px;
                height: 100px;
                font-size: 40px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸ¤– AI Voice Assistant</h1>
        <p class="subtitle">Tap the microphone and start talking</p>

        <div class="error" id="error"></div>

        <button class="mic-button" id="micButton">ðŸŽ¤</button>

        <div class="status" id="status">Ready to listen...</div>

        <div class="transcript" id="transcript">
            <p style="text-align: center; color: #999;">Your conversation will appear here...</p>
        </div>

        <div class="controls">
            <button class="btn btn-clear" onclick="clearTranscript()">Clear History</button>
        </div>

        <div class="features">
            <h3>What I Can Do:</h3>
            <ul>
                <li>Tell time and date</li>
                <li>Calculator (e.g., "25 + 75")</li>
                <li>Tell jokes</li>
                <li>Search Wikipedia</li>
                <li>Open websites</li>
            </ul>
        </div>
    </div>

    <script>
        // Check browser support
        if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
            document.getElementById('error').style.display = 'block';
            document.getElementById('error').textContent = 'Sorry, your browser does not support speech recognition. Please use Chrome, Edge, or Safari.';
        }

        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        const recognition = new SpeechRecognition();
        
        recognition.lang = 'en-US';
        recognition.continuous = false;
        recognition.interimResults = false;

        const micButton = document.getElementById('micButton');
        const status = document.getElementById('status');
        const transcript = document.getElementById('transcript');
        let isListening = false;

        micButton.addEventListener('click', () => {
            if (isListening) {
                recognition.stop();
            } else {
                recognition.start();
            }
        });

        recognition.onstart = () => {
            isListening = true;
            micButton.classList.add('listening');
            status.classList.add('listening');
            status.textContent = 'ðŸŽ¤ Listening... Speak now!';
        };

        recognition.onend = () => {
            isListening = false;
            micButton.classList.remove('listening');
            status.classList.remove('listening', 'speaking');
            status.textContent = 'Ready to listen...';
        };

        recognition.onerror = (event) => {
            console.error('Speech recognition error:', event.error);
            status.textContent = 'Error: ' + event.error;
            isListening = false;
            micButton.classList.remove('listening');
        };

        recognition.onresult = (event) => {
            const command = event.results[0][0].transcript;
            addToTranscript('You', command);
            processCommand(command);
        };

        function addToTranscript(speaker, text) {
            const p = document.createElement('p');
            const className = speaker === 'You' ? 'user-text' : 'assistant-text';
            p.innerHTML = `<span class="${className}">${speaker}:</span> ${text}`;
            
            // Remove placeholder text
            if (transcript.children.length === 1 && transcript.children[0].style.textAlign === 'center') {
                transcript.innerHTML = '';
            }
            
            transcript.appendChild(p);
            transcript.scrollTop = transcript.scrollHeight;
        }

        function speak(text) {
            status.classList.add('speaking');
            status.textContent = 'ðŸ”Š Speaking...';
            addToTranscript('Assistant', text);

            const utterance = new SpeechSynthesisUtterance(text);
            utterance.rate = 0.9;
            utterance.pitch = 1;
            utterance.volume = 1;

            utterance.onend = () => {
                status.classList.remove('speaking');
                status.textContent = 'Ready to listen...';
            };

            speechSynthesis.speak(utterance);
        }

        function processCommand(command) {
            const cmd = command.toLowerCase();

            // Stop command
            if (cmd.includes('stop') || cmd.includes('exit') || cmd.includes('quit') || cmd.includes('bye')) {
                speak('Goodbye! Have a great day!');
                return;
            }

            // Time
            if (cmd.includes('time')) {
                const now = new Date();
                const timeString = now.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit', hour12: true });
                speak(`The current time is ${timeString}`);
                return;
            }

            // Date
            if (cmd.includes('date') || cmd.includes('today')) {
                const now = new Date();
                const dateString = now.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
                speak(`Today's date is ${dateString}`);
                return;
            }

            // Calculator
            if (cmd.match(/\d+/) && (cmd.includes('+') || cmd.includes('-') || cmd.includes('*') || cmd.includes('/') || 
                cmd.includes('x') || cmd.includes('plus') || cmd.includes('minus') || cmd.includes('times') || 
                cmd.includes('multiply') || cmd.includes('divide') || cmd.includes('calculate') || cmd.includes('compute'))) {
                
                try {
                    let expression = cmd;
                    expression = expression.replace(/what is|calculate|compute|can you|please|equals?/gi, '');
                    expression = expression.replace(/plus|add/gi, '+');
                    expression = expression.replace(/minus|subtract/gi, '-');
                    expression = expression.replace(/times|multiply|multiplied by/gi, '*');
                    expression = expression.replace(/divided by|divide|over/gi, '/');
                    expression = expression.replace(/\s+x\s+/gi, '*');
                    expression = expression.trim();
                    
                    const result = eval(expression);
                    speak(`The answer is ${result}`);
                } catch (e) {
                    speak("Sorry, I couldn't calculate that.");
                }
                return;
            }

            // Jokes
            if (cmd.includes('joke') || cmd.includes('funny')) {
                const jokes = [
                    "Why do programmers prefer dark mode? Because light attracts bugs!",
                    "Why did the developer go broke? Because he used up all his cache!",
                    "What do you call a programmer from Finland? Nerdic!",
                    "Why do Java developers wear glasses? Because they don't C sharp!",
                    "How many programmers does it take to change a light bulb? None, that's a hardware problem!",
                    "Why did the computer show up at work late? It had a hard drive!",
                    "What's a computer's favorite snack? Microchips!",
                    "Why was the JavaScript developer sad? Because he didn't Node how to Express himself!"
                ];
                const randomJoke = jokes[Math.floor(Math.random() * jokes.length)];
                speak(randomJoke);
                return;
            }

            // Wikipedia
            if (cmd.includes('wikipedia') || cmd.includes('search for') || cmd.includes('who is') || cmd.includes('what is')) {
                speak("I can search Wikipedia, but this feature requires an internet API. For now, try asking me about time, calculations, or jokes!");
                return;
            }

            // Open websites
            if (cmd.includes('open')) {
                const websites = {
                    'youtube': 'https://www.youtube.com',
                    'google': 'https://www.google.com',
                    'facebook': 'https://www.facebook.com',
                    'instagram': 'https://www.instagram.com',
                    'twitter': 'https://www.twitter.com',
                    'gmail': 'https://mail.google.com'
                };

                for (const [site, url] of Object.entries(websites)) {
                    if (cmd.includes(site)) {
                        speak(`Opening ${site}`);
                        window.open(url, '_blank');
                        return;
                    }
                }
                speak("Sorry, I don't know how to open that website.");
                return;
            }

            // Default
            speak(`You said: ${command}`);
        }

        function clearTranscript() {
            transcript.innerHTML = '<p style="text-align: center; color: #999;">Your conversation will appear here...</p>';
        }
    </script>
</body>
</html>
